!function(t,i){var e=function(t,e){this.elem=t,this.$elem=i(t),this.options=e,this.zindexes=[]};e.prototype={init:function(){var s=this,n=10;if(this.settings=i.extend({middleslidewidth:40,spinnerheight:400,animspeed:500,animease:"swing",disableat:767,linkBtn:1,linkBtnClass:"btn btn-large",linkBtnText:"Enter Here",nav:1,navNextText:"Next",navPrevText:"Previous"},this.defaults,this.options),("swing"!=this.settings.animease||"linear"!=this.settings.animease)&&(this.settings.animease="swing"),i(t).on("resize",function(){var e=s.$elem.find(".spinner");i(t).width()<s.settings.disableat?e.hasClass("active")&&s.destroy():e.hasClass("active")||s.init()}),i(t).width()>this.settings.disableat){var a=this.$elem.find(".spinner").css("height",this.settings.spinnerheight);a.addClass("active");var d=a.find("li"),r=d.length,h=Math.floor(r/2),l=0,o=10,f=10,c=0;d.each(function(){i(this).addClass(h>l?"left":l>h?"right":"middle"),l++,i("<span/>").addClass("mask js-control active").appendTo(i(this)),i(this).find("img").addClass("image"),s.zindexes[c]=r/2>c?o*(c+1):s.zindexes[c-1]-f,c++});var p=i("<div/>").addClass("spinnernav").appendTo(this.$elem);if(this.settings.nav){i("<a/>").addClass("js-control next active").html(this.settings.navPrevText).attr("data-dir","prev").attr("title",this.settings.navPrevText).appendTo(p)}if(this.settings.linkBtn){i("<a/>").addClass("action").addClass(this.settings.linkBtnClass).html(this.settings.linkBtnText).attr("href",this.$elem.find(".middle > a").attr("href")).appendTo(p)}if(this.settings.nav){i("<a/>").addClass("js-control prev active").html(this.settings.navNextText).attr("data-dir","next").attr("title",this.settings.navNextText).appendTo(p)}var v=0,g=0,m=1*n,x=(100-this.settings.middleslidewidth)/2,u=x/h,w=(55+u*(h-1))/h;a.find(".left").each(function(){e.prototype.setupAttributes(i(this),v,g,w,m),v+=u,g+=u,m+=1*n});var C=m;m-=1*n,g-=10,v=100-v-(w-u),a.find(".right").each(function(){e.prototype.setupAttributes(i(this),v,g,w,m),v+=u,g-=u,m-=1*n}),a.find(".middle").css({top:0,left:x+"%","z-index":C,width:this.settings.middleslidewidth+"%"}),this.$elem.on("click",".js-control.active",function(t){t.preventDefault(),i(".js-control").removeClass("active");var e,a=0;i(this).attr("data-dir")?(e=i(this).attr("data-dir"),a=1):(a=i(this).closest("li").index(),a>h?(a-=h,e="next"):h>a?(a=h-a,e="prev"):a=0),s.triggerAnimation(a,e,n)})}return this},destroy:function(){var t=this.$elem.find(".spinner");t.removeClass("active").css("height","auto"),this.$elem.unbind("click"),this.$elem.find(".spinnernav").remove(),t.find("li").each(function(){i(this).attr("class","").css({left:"",top:"",width:"","z-index":""})}),t.find(".mask").remove(),t.find(".image").css({opacity:"",transform:""})},setupAttributes:function(t,i,e,s,n){t.css({left:i+"%",top:e+"%",width:s+"%","z-index":n})},triggerAnimation:function(t,e,s){t?this.animateSlide(t,e,s):i(".js-control").addClass("active")},hackZindexes:function(){var t=this,e=this.$elem.find(".spinner"),s=e.find("li");s.each(function(){i(this).css("z-index",t.zindexes[s.index(i(this))])})},animateSlide:function(t,e,s){{var n=this.$elem.find(".spinner"),a=n.find("li"),d=a.length;Math.floor(d/2)}"next"==e&&(a=i(n.find("li").get().reverse()));var r=this,h=1;a.each(function(){if(h){if(h=0,"next"==e){var d=n.find("li").first();d.appendTo(n)}else{var d=n.find("li").last();d.prependTo(n)}r.settings.linkBtn&&r.$elem.find(".action").attr("href",r.$elem.find(".middle > a").attr("href"))}var l=0;l="next"==e?a.length-i(this).index()-1:i(this).index();var o;o="next"==e?l<a.length-1?i(this).prev():n.find("li").last():l<a.length-1?i(this).next():n.find("li").first();var f=o.attr("class"),c=o.css("left"),p=o.css("top"),v=o.css("width"),g=r.$elem.width()/100;c=parseInt(c.split("px"))/g+"%",v=parseInt(v.split("px"))/g+"%",i(this).attr("data-pos",l),r.hackZindexes(),i(this).attr("class",f).animate({left:c,top:p,width:v},r.settings.animspeed,r.settings.animease,function(){parseInt(i(this).attr("data-pos"))==a.length-1&&(r.hackZindexes(),t--,r.triggerAnimation(t,e,s))})})}},i.fn.spinner=function(t){return this.each(function(){new e(this,t).init()})},t.Plugin=e}(window,jQuery);